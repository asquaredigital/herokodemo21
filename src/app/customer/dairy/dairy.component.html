<div class="page-container">
<div class="pageheading">
    Dairy Management
</div>
<div class="page-content">
<div class="action-button-container" [hidden]="(role=='carer')" >
    <button  (click)="openModel();"  class="create-user-button" >Create Dairy</button>
</div>

<div class="table-responsive"> 
    <table class="table-responsive">
        <thead>
           
        </thead>
        <tbody>
            <tr *ngFor="let dair of dairy" >
              <td>
                <div class="row">
                  <div class="col-xl-8 col-lg-7">
                      <!-- project card -->
                      <div class="card d-block">
                          <div class="card-body">
                              <div class="dropdown card-widgets">
                                 
                                  <div class="dropdown-menu dropdown-menu-right">
                                      <!-- item-->
                                      <a href="javascript:void(0);" class="dropdown-item">
                                          <i class='uil uil-file-upload mr-1'></i>Attachment
                                      </a>
                                      <!-- item-->
                                      <a href="javascript:void(0);" class="dropdown-item">
                                          <i class='uil uil-edit mr-1'></i>Edit
                                      </a>
                                      <!-- item-->
                                      <a href="javascript:void(0);" class="dropdown-item">
                                          <i class='uil uil-file-copy-alt mr-1'></i>Mark as Duplicate
                                      </a>
                                      <div class="dropdown-divider"></div>
                                      <!-- item-->
                                      <a href="javascript:void(0);" class="dropdown-item text-danger">
                                          <i class='uil uil-trash-alt mr-1'></i>Delete
                                      </a>
                                  </div> <!-- end dropdown menu-->
                              </div> <!-- end dropdown-->
                              
                              
                              
  
                              <h4 class="mt-3">Carer has not attended the client</h4>
  
                              <div class="row">
                                  <div class="col-6">
                                      <!-- assignee -->
                                      <h5 class="mt-3">Client Name</h5>
                                      <div class="media">
                                          <div class="media-body">
                                            <p class="text-muted mb-4">
                                                {{dair.client.name}}
                                              </p>
                                          </div>
                                          
                                      </div>
                                      <h5 class="mt-3">Carer Name</h5>
                                      <div class="media">
                                          <div class="media-body">
                                            <p class="text-muted mb-4">
                                                {{dair.agent.name}}
                                            </p>
                                          </div>
                                          
                                      </div>
                                      <!-- end assignee -->
                                  </div> <!-- end col -->
  
                                  <div class="col-6">
                                    <!-- assignee -->
                                    <h5 class="mt-3">Type</h5>
                                    <div class="media">
                                        <div class="media-body">
                                          <p class="text-muted mb-4">
                                            {{dair.note_type}}
                                            </p>
                                        </div>
                                        
                                    </div>
                                    <h5 class="mt-3">Time</h5>
                                    <div class="media">
                                        <div class="media-body">
                                          <p class="text-muted mb-4">
                                             09/03/2021 12.30pm
                                          </p>
                                        </div>
                                        
                                    </div>
                                    <!-- end assignee -->
                                </div> <!-- end col -->
                              </div> <!-- end row -->
  
  
                              <h5 class="mt-3">Overview:</h5>
  
                              <p class="text-muted mb-4">
                                {{dair.description}}. This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer. Some quick example text to build on the card title and make up the bulk of the card's content. Some quick example text to build on the card title and make up.
                              </p>
  
                           
                          </div> <!-- end card-body-->
                          
                      </div> <!-- end card-->
  
                      <!-- end card-->
                  </div> <!-- end col -->
  
              </div>
          </td>





               
                
            </tr>    
        </tbody>
    </table>

     
</div>
</div>
</div>

<ng-template #serviceDetails >
      <div class="modal-header" >
        <h4 class="modal-title pull-left">Service Details</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeModel()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>Client Name : {{currentClient}}</div>
        <div>Carer Name : {{currentCarer}}</div>
        <h5>Services</h5>
         <ul>
          <li *ngFor="let serv of currentServices" >
              {{serv}}
          </li>
         </ul>
         <h5>Notes</h5>
         <div>{{currentNotes}}</div>
      </div>
      <div class="modal-footer">        
      </div> 
  </ng-template>


 <ng-template #modaltemplate >
      <div class="modal-header" >
        <h4 class="modal-title pull-left">Create Dairy</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeModel()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
         <form   [formGroup]="userForm" (ngSubmit)="createDairy()" >
  <div class="form-group-right">
        <div class="form-label-right"><label for="agent" class="">Carer</label></div>
        <select formControlName="agent" class="form-control-right" >
          <option value="" selected="selected">Select Carer</option>
          <option *ngFor="let agent of agents"  value="{{agent.id}}">{{agent.name}}</option>
          
        </select>
         <div *ngIf="isSubmitted && formControls.agent.errors" class="help-block">
      <div *ngIf="formControls.agent.errors.required"><span class="error-span popup-error">Agent is required</span></div>
      
    </div>
  </div>

   <div class="form-group-right">
        <div class="form-label-right"><label for="client" class="">Client</label></div>
        <select formControlName="client"  class="form-control-right" >
          <option value="" selected="selected">Select Client</option>
         <option *ngFor="let client of clients"  value="{{client.id}}">{{client.name}}</option>
        </select>
         <div *ngIf="isSubmitted && formControls.client.errors" class="help-block">
      <div *ngIf="formControls.client.errors.required"><span class="error-span popup-error">Client is required</span></div>
      
    </div>
  </div>
 
  <div class="form-group-right">
        <div class="form-label-right"><label for="category" class="">Category</label></div>
        
       <select formControlName="category" class="form-control-right" >
          <option value="" selected="selected">Select Category</option>
          <option *ngFor="let category of categories"  value="{{category.id}}">{{category.name}}</option>
          
        </select>
         <div *ngIf="isSubmitted && formControls.category.errors" class="help-block">
      <div *ngIf="formControls.category.errors.required"><span class="error-span popup-error">Category is required</span></div>
      
    </div>
  </div>

   <div class="form-group-right" style="float: left;width: 100%">
        <div class="form-label-right"><label for="notes" class="">Description</label></div>
        <div>
        <textarea formControlName="notes" class="form-control-right" >
          
        </textarea>
      </div>
         <div *ngIf="isSubmitted && formControls.client.errors" class="help-block">
      <div *ngIf="formControls.client.errors.required"><span class="error-span popup-error">Client is required</span></div>
      
    </div>
  </div>
          <br/>
          <div class="form-group">
            <button  [disabled]="isDisabled"  type="submit" class="btn btn-success">Submit</button>
          </div>
         
        </form>
      </div>
      <div class="modal-footer">        
      </div> 
  </ng-template>


